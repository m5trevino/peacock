{
  "inputs": {
    "spark": "",
    "falcon": "SPARK – Live Circuit Style-Spec  \n(usable verbatim in a Tailwind + Framer Motion React/Next project)\n\n--------------------------------------------------\n1. GLOBAL TOKENS (Tailwind)\n--------------------------------------------------\n@theme {\n  --color-void: #050505;\n  --color-matrix: #00FF41;\n  --color-alert: #FF2A2A;\n  --color-process: #FFD400;\n\n  --font-mono: \"JetBrains Mono\", monospace;\n\n  /* CRT grain */\n  --crt-glow: 0 0 2px var(--color-matrix),\n              0 0 4px var(--color-matrix);\n  --crt-blur: 0 0 1px rgba(0,255,65,.7);\n}\n\n--------------------------------------------------\n2. BASE LAYER\n--------------------------------------------------\n<body class=\"bg-void text-matrix font-mono antialiased\">\n  <div class=\"pointer-events-none fixed inset-0 opacity-20\n              bg-[linear-gradient(rgba(0,255,65,.15)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,65,.15)_1px,transparent_1px)]\n              bg-[size:2px_2px] motion-safe:animate-pulse\" />\n</body>\n\n--------------------------------------------------\n3. PRIMITIVE CLASSES\n--------------------------------------------------\n/* 1px horizontal scanline travelling down */\n.scanline {\n  @apply absolute left-0 right-0 h-px bg-matrix/40;\n  animation: scan 6s linear infinite;\n}\n@keyframes scan { to { transform: translateY(100vh); } }\n\n/* Monospaced density helpers */\n.dense { @apply text-xs leading-none tracking-tighter; }\n.dense-lg { @apply text-sm leading-tight; }\n\n/* Text glow utilities */\n.glow-success { text-shadow: var(--crt-glow); }\n.glow-fail { text-shadow: 0 0 3px var(--color-alert); }\n.glow-process { text-shadow: 0 0 3px var(--color-process); }\n\n--------------------------------------------------\n4. SVG “WIRE” COMPONENT (The Nervous System)\n--------------------------------------------------\n/* Wire appearance */\n.wire {\n  @apply stroke-2 fill-none stroke-matrix/70;\n  filter: drop-shadow(var(--crt-blur));\n}\n\n/* Framer Motion states */\nconst wireStates = {\n  idle: { pathLength: 1, stroke: \"#00FF41\", strokeOpacity: 0.6 },\n  success: { pathLength: 1, stroke: \"#00FF41\", strokeOpacity: 1 },\n  fail: { pathLength: 1, stroke: \"#FF2A2A\", strokeOpacity: 1 },\n  processing: { pathLength: 1, stroke: \"#FFD400\", strokeOpacity: 1 }\n};\n\n/* Pulse / Flow FX (processing) */\nconst processingVariants = {\n  initial: { strokeDasharray: \"4 12\", strokeDashoffset: 0 },\n  animate: { strokeDashoffset: [0, -16], transition: { repeat: Infinity, duration: .6, ease: \"linear\" } }\n};\n\n/* Break / Flash (fail) */\nconst failVariants = {\n  initial: { strokeDasharray: \"1000\", strokeDashoffset: 0 },\n  animate: {\n    strokeDasharray: [\"1000 0\", \"0 1000\"],\n    stroke: [\"#FF2A2A\", \"#050505\", \"#FF2A2A\"],\n    transition: { duration: .35, times: [0, .5, 1], repeat: 2 }\n  }\n};\n\n--------------------------------------------------\n5. USAGE EXAMPLE (React/TSX)\n--------------------------------------------------\nexport default function Wire({ state }: { state: \"idle\" | \"success\" | \"fail\" | \"processing\" }) {\n  return (\n    <svg className=\"absolute inset-0 w-full h-full\">\n      <motion.path\n        d=\"M 10 80 C 40 10 65 10 95 80 S 150 150 190 80\"\n        className=\"wire\"\n        variants={state === \"processing\" ? processingVariants : failVariants}\n        initial=\"initial\"\n        animate={state}\n      />\n    </svg>\n  );\n}\n\n--------------------------------------------------\n6. ACCESSIBILITY / REDUCED MOTION\n--------------------------------------------------\n@media (prefers-reduced-motion: reduce) {\n  .scanline { animation: none; }\n  motion.path { transition: none !important; }\n}\n\n--------------------------------------------------\n7. QUICK REFERENCE CHEAT-SHEET\n--------------------------------------------------\nSolid green line     →  <Wire state=\"success\" />\nFlashing red break   →  <Wire state=\"fail\" />\nPulsing data flow    →  <Wire state=\"processing\" />\nCRT scanline overlay →  <div className=\"scanline\" />\n\n--------------------------------------------------\n8. OPTIONAL EXTRAS\n--------------------------------------------------\n- Add subtle flicker to the whole viewport:  \n  .flicker { animation: flicker .18s infinite; }\n  @keyframes flicker { 0%,100% { opacity: 1; } 50% { opacity: .985; } }\n\n- Blinking cursor after CLI lines:  \n  .cursor::after { content: \"_\"; animation: blink 1s steps(2) infinite; }\n  @keyframes blink { to { visibility: hidden; } }\n\nDrop these classes into any component to keep the board alive.",
    "eagle": "Falcon here.  \nBelow is the minimal, but complete, contract that keeps the UI thread free, the store tiny, and the IndexedDB layer streaming.\n\n--------------------------------------------------\n1.  STATE MANAGEMENT  (Zustand)\n--------------------------------------------------\nstore/nodesStore.ts\n```ts\nimport { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nexport type NodeStatus = 'idle' | 'loading' | 'success' | 'error';\n\nexport interface NodeState {\n  id: string;\n  status: NodeStatus;\n  progress?: number;          // 0-100 optional\n  error?: string;\n  updatedAt: number;          // timestamp – used for LRU eviction\n}\n\ninterface NodesStore {\n  nodes: Record<string, NodeState>;\n  setStatus: (id: string, status: NodeStatus, payload?: Partial<Omit<NodeState,'id'|'status'>>) => void;\n  getStatus: (id: string) => NodeStatus;\n}\n\nexport const useNodes = create<NodesStore>()(\n  subscribeWithSelector((set, get) => ({\n    nodes: {},\n    setStatus: (id, status, payload) =>\n      set(({ nodes }) => ({\n        nodes: {\n          ...nodes,\n          [id]: { ...nodes[id], id, status, ...payload, updatedAt: Date.now() },\n        },\n      })),\n    getStatus: (id) => get().nodes[id]?.status ?? 'idle',\n  }))\n);\n```\n\n--------------------------------------------------\n2.  BLUEPRINT LAYER  (Documentation & Contract)\n--------------------------------------------------\nblueprint/types.ts\n```ts\nexport interface NodeBlueprint {\n  id: string;\n  inputs: string[];      // semantic names, not types\n  outputs: string[];\n  states: string[];      // human-readable sub-stages\n}\n\nexport interface BlueprintMap {\n  [nodeId: string]: NodeBlueprint;\n}\n\n/* ---------- Example registry ---------- */\nexport const BLUEPRINTS: BlueprintMap = {\n  BATCH_PROCESSOR: {\n    id: 'BATCH_PROCESSOR',\n    inputs: ['Files'],\n    outputs: ['IndexedDB'],\n    states: ['Parsing', 'Striking'],\n  },\n  ETL_WORKER: {\n    id: 'ETL_WORKER',\n    inputs: ['RawJSON'],\n    outputs: ['ParquetBlob'],\n    states: ['Validate', 'Transform', 'Compress'],\n  },\n};\n```\n\n--------------------------------------------------\n3.  PERSISTENCE  (Dexie without blocking)\n--------------------------------------------------\nlib/dexieDB.ts\n```ts\nimport Dexie, { Table } from 'dexie';\n\nexport interface PersistedNode {\n  id: string;\n  status: NodeStatus;\n  progress?: number;\n  error?: string;\n  updatedAt: number;\n}\n\nclass BlueprintDexie extends Dexie {\n  nodes!: Table<PersistedNode>;\n\n  constructor() {\n    super('BlueprintDB');\n    this.version(1).stores({ nodes: 'id,updatedAt' });\n  }\n}\n\nexport const db = new BlueprintDexie();\n\n/* ---------- Non-blocking sync ---------- */\nexport function syncToDexie(state: Record<string, NodeState>) {\n  // Fire-and-forget: Dexie handles its own micro-task queue\n  db.nodes.bulkPut(Object.values(state)).catch(() => {\n    /* silent fail – store remains source of truth */\n  });\n}\n```\n\n--------------------------------------------------\n4.  STATE MACHINE  (Finite-state driver)\n--------------------------------------------------\nmachines/nodeMachine.ts\n```ts\nimport { useEffect } from 'react';\nimport { useNodes, NodeStatus } from '@/store/nodesStore';\nimport { BLUEPRINTS, NodeBlueprint } from '@/blueprint/types';\nimport { db, syncToDexie } from '@/lib/dexieDB';\n\ntype Transition = { [K in NodeStatus]?: NodeStatus[] };\n\nconst TRANSITIONS: Transition = {\n  idle: ['loading'],\n  loading: ['success', 'error'],\n  success: ['loading'],\n  error: ['loading'],\n};\n\nexport function useNodeMachine(nodeId: string) {\n  const { nodes, setStatus } = useNodes();\n  const current = nodes[nodeId];\n\n  useEffect(() => {\n    // Persist every change off the main thread\n    syncToDexie(nodes);\n  }, [nodes]);\n\n  const blueprint: NodeBlueprint = BLUEPRINTS[nodeId];\n\n  const transition = (target: NodeStatus) => {\n    const allowed = TRANSITIONS[current?.status || 'idle'] || [];\n    if (!allowed.includes(target)) return;\n    setStatus(nodeId, target);\n  };\n\n  return { blueprint, current, transition };\n}\n```\n\n--------------------------------------------------\n5.  USAGE EXAMPLE  (React component)\n--------------------------------------------------\ncomponents/NodeCard.tsx\n```tsx\nexport function NodeCard({ id }: { id: string }) {\n  const { blueprint, current, transition } = useNodeMachine(id);\n\n  return (\n    <div className={`node ${current?.status}`}>\n      <h3>{blueprint.id}</h3>\n      <p>Status: {current?.status}</p>\n      <button onClick={() => transition('loading')}>Run</button>\n    </div>\n  );\n}\n```\n\n--------------------------------------------------\nSUMMARY\n--------------------------------------------------\n- Global store keeps only runtime state; Dexie is the durable log.  \n- Blueprint layer is a plain registry—no runtime logic.  \n- State machine enforces valid transitions; UI merely calls `transition()`.",
    "owl": "```typescript\n// src/components/debug/TestBench.tsx\ncat << 'EOF'\nimport React, { useState } from 'react';\nimport { apiCall, dbQuery, batchJob } from '../../lib/engine';\nimport styles from './TestBench.module.css';\n\nexport const TestBench: React.FC = () => {\n  const [log, setLog] = useState<string[]>([]);\n\n  const append = (msg: string) => setLog(prev => [...prev, `[${new Date().toISOString()}] ${msg}`]);\n\n  const handleApi = async () => {\n    append('API → start');\n    try {\n      const res = await apiCall('/health');\n      append(`API ← ${res.status}`);\n    } catch (e: any) {\n      append(`API ✖ ${e.message}`);\n    }\n  };\n\n  const handleDb = async () => {\n    append('DB → start');\n    try {\n      const rows = await dbQuery('SELECT 1 as ok');\n      append(`DB ← ${rows.length} rows`);\n    } catch (e: any) {\n      append(`DB ✖ ${e.message}`);\n    }\n  };\n\n  const handleBatch = async () => {\n    append('BATCH → start');\n    try {\n      const report = await batchJob('nightly');\n      append(`BATCH ← ${report.count} records`);\n    } catch (e: any) {\n      append(`BATCH ✖ ${e.message}`);\n    }\n  };\n\n  return (\n    <section className={styles.bay}>\n      <h2>Mechanic's Bay</h2>\n      <div className={styles.controls}>\n        <button onClick={handleApi}>API</button>\n        <button onClick={handleDb}>DB</button>\n        <button onClick={handleBatch}>BATCH</button>\n      </div>\n      <pre className={styles.log}>{log.join('\\n')}</pre>\n    </section>\n  );\n};\nEOF\n```\n\n```typescript\n// src/components/visual/CircuitBoard.tsx\ncat << 'EOF'\nimport React, { useRef, useEffect } from 'react';\nimport { useTestBench } from '../../hooks/useTestBench';\nimport styles from './CircuitBoard.module.css';\n\ntype Node = { id: string; x: number; y: number; type: 'api' | 'db' | 'batch' };\n\nexport const CircuitBoard: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement>(null);\n  const { lastEvent } = useTestBench();\n\n  const nodes: Node[] = [\n    { id: 'api', x: 100, y: 100, type: 'api' },\n    { id: 'db', x: 300, y: 100, type: 'db' },\n    { id: 'batch', x: 500, y: 100, type: 'batch' },\n  ];\n\n  useEffect(() => {\n    if (!lastEvent) return;\n    const el = document.getElementById(lastEvent.type);\n    if (el) el.classList.add(styles.pulse);\n    setTimeout(() => el?.classList.remove(styles.pulse), 600);\n  }, [lastEvent]);\n\n  return (\n    <div className={styles.board}>\n      <svg ref={svgRef} width=\"100%\" height=\"100%\">\n        <line x1={100} y1={100} x2={300} y2={100} stroke=\"#00ffaa\" strokeWidth=\"2\" />\n        <line x1={300} y1={100} x2={500} y2={100} stroke=\"#00ffaa\" strokeWidth=\"2\" />\n        {nodes.map(n => (\n          <g key={n.id} id={n.id} className={styles.node} onClick={() => window.dispatchEvent(new CustomEvent('nodeClick', { detail: n }))}>\n            <circle cx={n.x} cy={n.y} r=\"20\" />\n            <text x={n.x} y={n.y + 5} textAnchor=\"middle\" fill=\"#fff\">{n.type}</text>\n          </g>\n        ))}\n      </svg>\n    </div>\n  );\n};\nEOF\n```\n\n```typescript\n// src/components/visual/BlueprintOverlay.tsx\ncat << 'EOF'\nimport React, { useState, useEffect } from 'react';\nimport styles from './BlueprintOverlay.module.css';\n\ntype Spec = { id: string; logic: string };\n\nexport const BlueprintOverlay: React.FC = () => {\n  const [spec, setSpec] = useState<Spec | null>(null);\n\n  useEffect(() => {\n    const onClick = (e: CustomEvent) => {\n      const map: Record<string, string> = {\n        api: 'HTTP fetch with retry & circuit-breaker',\n        db: 'Parameterized query with connection-pool',\n        batch: 'Chunked async iterator with back-pressure',\n      };\n      setSpec({ id: e.detail.id, logic: map[e.detail.type] });\n    };\n    window.addEventListener('nodeClick' as any, onClick);\n    return () => window.removeEventListener('nodeClick' as any, onClick);\n  }, []);\n\n  if (!spec) return null;\n\n  return (\n    <aside className={styles.overlay} onClick={() => setSpec(null)}>\n      <h3>Blueprint: {spec.id}</h3>\n      <pre>{spec.logic}</pre>\n    </aside>\n  );\n};\nEOF\n```",
    "hawk": ""
  },
  "outputs": {
    "spark": "SPARK – Live Circuit Style-Spec  \n(usable verbatim in a Tailwind + Framer Motion React/Next project)\n\n--------------------------------------------------\n1. GLOBAL TOKENS (Tailwind)\n--------------------------------------------------\n@theme {\n  --color-void: #050505;\n  --color-matrix: #00FF41;\n  --color-alert: #FF2A2A;\n  --color-process: #FFD400;\n\n  --font-mono: \"JetBrains Mono\", monospace;\n\n  /* CRT grain */\n  --crt-glow: 0 0 2px var(--color-matrix),\n              0 0 4px var(--color-matrix);\n  --crt-blur: 0 0 1px rgba(0,255,65,.7);\n}\n\n--------------------------------------------------\n2. BASE LAYER\n--------------------------------------------------\n<body class=\"bg-void text-matrix font-mono antialiased\">\n  <div class=\"pointer-events-none fixed inset-0 opacity-20\n              bg-[linear-gradient(rgba(0,255,65,.15)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,65,.15)_1px,transparent_1px)]\n              bg-[size:2px_2px] motion-safe:animate-pulse\" />\n</body>\n\n--------------------------------------------------\n3. PRIMITIVE CLASSES\n--------------------------------------------------\n/* 1px horizontal scanline travelling down */\n.scanline {\n  @apply absolute left-0 right-0 h-px bg-matrix/40;\n  animation: scan 6s linear infinite;\n}\n@keyframes scan { to { transform: translateY(100vh); } }\n\n/* Monospaced density helpers */\n.dense { @apply text-xs leading-none tracking-tighter; }\n.dense-lg { @apply text-sm leading-tight; }\n\n/* Text glow utilities */\n.glow-success { text-shadow: var(--crt-glow); }\n.glow-fail { text-shadow: 0 0 3px var(--color-alert); }\n.glow-process { text-shadow: 0 0 3px var(--color-process); }\n\n--------------------------------------------------\n4. SVG “WIRE” COMPONENT (The Nervous System)\n--------------------------------------------------\n/* Wire appearance */\n.wire {\n  @apply stroke-2 fill-none stroke-matrix/70;\n  filter: drop-shadow(var(--crt-blur));\n}\n\n/* Framer Motion states */\nconst wireStates = {\n  idle: { pathLength: 1, stroke: \"#00FF41\", strokeOpacity: 0.6 },\n  success: { pathLength: 1, stroke: \"#00FF41\", strokeOpacity: 1 },\n  fail: { pathLength: 1, stroke: \"#FF2A2A\", strokeOpacity: 1 },\n  processing: { pathLength: 1, stroke: \"#FFD400\", strokeOpacity: 1 }\n};\n\n/* Pulse / Flow FX (processing) */\nconst processingVariants = {\n  initial: { strokeDasharray: \"4 12\", strokeDashoffset: 0 },\n  animate: { strokeDashoffset: [0, -16], transition: { repeat: Infinity, duration: .6, ease: \"linear\" } }\n};\n\n/* Break / Flash (fail) */\nconst failVariants = {\n  initial: { strokeDasharray: \"1000\", strokeDashoffset: 0 },\n  animate: {\n    strokeDasharray: [\"1000 0\", \"0 1000\"],\n    stroke: [\"#FF2A2A\", \"#050505\", \"#FF2A2A\"],\n    transition: { duration: .35, times: [0, .5, 1], repeat: 2 }\n  }\n};\n\n--------------------------------------------------\n5. USAGE EXAMPLE (React/TSX)\n--------------------------------------------------\nexport default function Wire({ state }: { state: \"idle\" | \"success\" | \"fail\" | \"processing\" }) {\n  return (\n    <svg className=\"absolute inset-0 w-full h-full\">\n      <motion.path\n        d=\"M 10 80 C 40 10 65 10 95 80 S 150 150 190 80\"\n        className=\"wire\"\n        variants={state === \"processing\" ? processingVariants : failVariants}\n        initial=\"initial\"\n        animate={state}\n      />\n    </svg>\n  );\n}\n\n--------------------------------------------------\n6. ACCESSIBILITY / REDUCED MOTION\n--------------------------------------------------\n@media (prefers-reduced-motion: reduce) {\n  .scanline { animation: none; }\n  motion.path { transition: none !important; }\n}\n\n--------------------------------------------------\n7. QUICK REFERENCE CHEAT-SHEET\n--------------------------------------------------\nSolid green line     →  <Wire state=\"success\" />\nFlashing red break   →  <Wire state=\"fail\" />\nPulsing data flow    →  <Wire state=\"processing\" />\nCRT scanline overlay →  <div className=\"scanline\" />\n\n--------------------------------------------------\n8. OPTIONAL EXTRAS\n--------------------------------------------------\n- Add subtle flicker to the whole viewport:  \n  .flicker { animation: flicker .18s infinite; }\n  @keyframes flicker { 0%,100% { opacity: 1; } 50% { opacity: .985; } }\n\n- Blinking cursor after CLI lines:  \n  .cursor::after { content: \"_\"; animation: blink 1s steps(2) infinite; }\n  @keyframes blink { to { visibility: hidden; } }\n\nDrop these classes into any component to keep the board alive.",
    "falcon": "Falcon here.  \nBelow is the minimal, but complete, contract that keeps the UI thread free, the store tiny, and the IndexedDB layer streaming.\n\n--------------------------------------------------\n1.  STATE MANAGEMENT  (Zustand)\n--------------------------------------------------\nstore/nodesStore.ts\n```ts\nimport { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nexport type NodeStatus = 'idle' | 'loading' | 'success' | 'error';\n\nexport interface NodeState {\n  id: string;\n  status: NodeStatus;\n  progress?: number;          // 0-100 optional\n  error?: string;\n  updatedAt: number;          // timestamp – used for LRU eviction\n}\n\ninterface NodesStore {\n  nodes: Record<string, NodeState>;\n  setStatus: (id: string, status: NodeStatus, payload?: Partial<Omit<NodeState,'id'|'status'>>) => void;\n  getStatus: (id: string) => NodeStatus;\n}\n\nexport const useNodes = create<NodesStore>()(\n  subscribeWithSelector((set, get) => ({\n    nodes: {},\n    setStatus: (id, status, payload) =>\n      set(({ nodes }) => ({\n        nodes: {\n          ...nodes,\n          [id]: { ...nodes[id], id, status, ...payload, updatedAt: Date.now() },\n        },\n      })),\n    getStatus: (id) => get().nodes[id]?.status ?? 'idle',\n  }))\n);\n```\n\n--------------------------------------------------\n2.  BLUEPRINT LAYER  (Documentation & Contract)\n--------------------------------------------------\nblueprint/types.ts\n```ts\nexport interface NodeBlueprint {\n  id: string;\n  inputs: string[];      // semantic names, not types\n  outputs: string[];\n  states: string[];      // human-readable sub-stages\n}\n\nexport interface BlueprintMap {\n  [nodeId: string]: NodeBlueprint;\n}\n\n/* ---------- Example registry ---------- */\nexport const BLUEPRINTS: BlueprintMap = {\n  BATCH_PROCESSOR: {\n    id: 'BATCH_PROCESSOR',\n    inputs: ['Files'],\n    outputs: ['IndexedDB'],\n    states: ['Parsing', 'Striking'],\n  },\n  ETL_WORKER: {\n    id: 'ETL_WORKER',\n    inputs: ['RawJSON'],\n    outputs: ['ParquetBlob'],\n    states: ['Validate', 'Transform', 'Compress'],\n  },\n};\n```\n\n--------------------------------------------------\n3.  PERSISTENCE  (Dexie without blocking)\n--------------------------------------------------\nlib/dexieDB.ts\n```ts\nimport Dexie, { Table } from 'dexie';\n\nexport interface PersistedNode {\n  id: string;\n  status: NodeStatus;\n  progress?: number;\n  error?: string;\n  updatedAt: number;\n}\n\nclass BlueprintDexie extends Dexie {\n  nodes!: Table<PersistedNode>;\n\n  constructor() {\n    super('BlueprintDB');\n    this.version(1).stores({ nodes: 'id,updatedAt' });\n  }\n}\n\nexport const db = new BlueprintDexie();\n\n/* ---------- Non-blocking sync ---------- */\nexport function syncToDexie(state: Record<string, NodeState>) {\n  // Fire-and-forget: Dexie handles its own micro-task queue\n  db.nodes.bulkPut(Object.values(state)).catch(() => {\n    /* silent fail – store remains source of truth */\n  });\n}\n```\n\n--------------------------------------------------\n4.  STATE MACHINE  (Finite-state driver)\n--------------------------------------------------\nmachines/nodeMachine.ts\n```ts\nimport { useEffect } from 'react';\nimport { useNodes, NodeStatus } from '@/store/nodesStore';\nimport { BLUEPRINTS, NodeBlueprint } from '@/blueprint/types';\nimport { db, syncToDexie } from '@/lib/dexieDB';\n\ntype Transition = { [K in NodeStatus]?: NodeStatus[] };\n\nconst TRANSITIONS: Transition = {\n  idle: ['loading'],\n  loading: ['success', 'error'],\n  success: ['loading'],\n  error: ['loading'],\n};\n\nexport function useNodeMachine(nodeId: string) {\n  const { nodes, setStatus } = useNodes();\n  const current = nodes[nodeId];\n\n  useEffect(() => {\n    // Persist every change off the main thread\n    syncToDexie(nodes);\n  }, [nodes]);\n\n  const blueprint: NodeBlueprint = BLUEPRINTS[nodeId];\n\n  const transition = (target: NodeStatus) => {\n    const allowed = TRANSITIONS[current?.status || 'idle'] || [];\n    if (!allowed.includes(target)) return;\n    setStatus(nodeId, target);\n  };\n\n  return { blueprint, current, transition };\n}\n```\n\n--------------------------------------------------\n5.  USAGE EXAMPLE  (React component)\n--------------------------------------------------\ncomponents/NodeCard.tsx\n```tsx\nexport function NodeCard({ id }: { id: string }) {\n  const { blueprint, current, transition } = useNodeMachine(id);\n\n  return (\n    <div className={`node ${current?.status}`}>\n      <h3>{blueprint.id}</h3>\n      <p>Status: {current?.status}</p>\n      <button onClick={() => transition('loading')}>Run</button>\n    </div>\n  );\n}\n```\n\n--------------------------------------------------\nSUMMARY\n--------------------------------------------------\n- Global store keeps only runtime state; Dexie is the durable log.  \n- Blueprint layer is a plain registry—no runtime logic.  \n- State machine enforces valid transitions; UI merely calls `transition()`.",
    "eagle": "```typescript\n// src/components/debug/TestBench.tsx\ncat << 'EOF'\nimport React, { useState } from 'react';\nimport { apiCall, dbQuery, batchJob } from '../../lib/engine';\nimport styles from './TestBench.module.css';\n\nexport const TestBench: React.FC = () => {\n  const [log, setLog] = useState<string[]>([]);\n\n  const append = (msg: string) => setLog(prev => [...prev, `[${new Date().toISOString()}] ${msg}`]);\n\n  const handleApi = async () => {\n    append('API → start');\n    try {\n      const res = await apiCall('/health');\n      append(`API ← ${res.status}`);\n    } catch (e: any) {\n      append(`API ✖ ${e.message}`);\n    }\n  };\n\n  const handleDb = async () => {\n    append('DB → start');\n    try {\n      const rows = await dbQuery('SELECT 1 as ok');\n      append(`DB ← ${rows.length} rows`);\n    } catch (e: any) {\n      append(`DB ✖ ${e.message}`);\n    }\n  };\n\n  const handleBatch = async () => {\n    append('BATCH → start');\n    try {\n      const report = await batchJob('nightly');\n      append(`BATCH ← ${report.count} records`);\n    } catch (e: any) {\n      append(`BATCH ✖ ${e.message}`);\n    }\n  };\n\n  return (\n    <section className={styles.bay}>\n      <h2>Mechanic's Bay</h2>\n      <div className={styles.controls}>\n        <button onClick={handleApi}>API</button>\n        <button onClick={handleDb}>DB</button>\n        <button onClick={handleBatch}>BATCH</button>\n      </div>\n      <pre className={styles.log}>{log.join('\\n')}</pre>\n    </section>\n  );\n};\nEOF\n```\n\n```typescript\n// src/components/visual/CircuitBoard.tsx\ncat << 'EOF'\nimport React, { useRef, useEffect } from 'react';\nimport { useTestBench } from '../../hooks/useTestBench';\nimport styles from './CircuitBoard.module.css';\n\ntype Node = { id: string; x: number; y: number; type: 'api' | 'db' | 'batch' };\n\nexport const CircuitBoard: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement>(null);\n  const { lastEvent } = useTestBench();\n\n  const nodes: Node[] = [\n    { id: 'api', x: 100, y: 100, type: 'api' },\n    { id: 'db', x: 300, y: 100, type: 'db' },\n    { id: 'batch', x: 500, y: 100, type: 'batch' },\n  ];\n\n  useEffect(() => {\n    if (!lastEvent) return;\n    const el = document.getElementById(lastEvent.type);\n    if (el) el.classList.add(styles.pulse);\n    setTimeout(() => el?.classList.remove(styles.pulse), 600);\n  }, [lastEvent]);\n\n  return (\n    <div className={styles.board}>\n      <svg ref={svgRef} width=\"100%\" height=\"100%\">\n        <line x1={100} y1={100} x2={300} y2={100} stroke=\"#00ffaa\" strokeWidth=\"2\" />\n        <line x1={300} y1={100} x2={500} y2={100} stroke=\"#00ffaa\" strokeWidth=\"2\" />\n        {nodes.map(n => (\n          <g key={n.id} id={n.id} className={styles.node} onClick={() => window.dispatchEvent(new CustomEvent('nodeClick', { detail: n }))}>\n            <circle cx={n.x} cy={n.y} r=\"20\" />\n            <text x={n.x} y={n.y + 5} textAnchor=\"middle\" fill=\"#fff\">{n.type}</text>\n          </g>\n        ))}\n      </svg>\n    </div>\n  );\n};\nEOF\n```\n\n```typescript\n// src/components/visual/BlueprintOverlay.tsx\ncat << 'EOF'\nimport React, { useState, useEffect } from 'react';\nimport styles from './BlueprintOverlay.module.css';\n\ntype Spec = { id: string; logic: string };\n\nexport const BlueprintOverlay: React.FC = () => {\n  const [spec, setSpec] = useState<Spec | null>(null);\n\n  useEffect(() => {\n    const onClick = (e: CustomEvent) => {\n      const map: Record<string, string> = {\n        api: 'HTTP fetch with retry & circuit-breaker',\n        db: 'Parameterized query with connection-pool',\n        batch: 'Chunked async iterator with back-pressure',\n      };\n      setSpec({ id: e.detail.id, logic: map[e.detail.type] });\n    };\n    window.addEventListener('nodeClick' as any, onClick);\n    return () => window.removeEventListener('nodeClick' as any, onClick);\n  }, []);\n\n  if (!spec) return null;\n\n  return (\n    <aside className={styles.overlay} onClick={() => setSpec(null)}>\n      <h3>Blueprint: {spec.id}</h3>\n      <pre>{spec.logic}</pre>\n    </aside>\n  );\n};\nEOF\n```",
    "owl": "",
    "hawk": ""
  },
  "telemetry": {
    "spark": {
      "status": "success"
    },
    "falcon": {
      "status": "success"
    },
    "eagle": {
      "status": "success"
    },
    "owl": {
      "status": "idle"
    },
    "hawk": {
      "status": "idle"
    }
  },
  "activePrompts": {
    "spark": "02_spark_design",
    "falcon": "03_falcon_architecture",
    "eagle": "04_eagle_implementation",
    "owl": "owl_v21",
    "hawk": "05_hawk_qa"
  },
  "owlQueue": [],
  "name": "AVIARY_INIT",
  "id": "OP_1768699099827"
}