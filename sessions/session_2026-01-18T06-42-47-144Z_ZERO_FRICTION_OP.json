{
  "inputs": {
    "spark": "```json\n{\n  \"app_name\": \"CaseFlow Pro\",\n  \"core_concept\": \"A lightning-fast, offline-first legal research search engine that indexes and provides AI-powered summaries for a massive database of court documents.\",\n  \"problem_solved\": \"Provides an accessible, categorized, and searchable interface for over 1,100 legal documents that are otherwise difficult to navigate, offering AI-generated summaries and cross-references to speed up legal discovery.\",\n  \"user_workflow\": \"1. User launches the local Python server. 2. User accesses the web interface via localhost. 3. The application loads a pre-processed JavaScript-based document database into memory. 4. User enters search terms (e.g., 'motion', 'DNA', 'court order'). 5. The app filters the database in real-time. 6. User reviews document cards containing AI summaries and metadata. 7. User clicks a link to view the full PDF hosted on a remote API/server.\",\n  \"features\": {\n    \"core\": [\n      \"Full-text search across document names, AI summaries, document types, and key terms.\",\n      \"Categorized browsing by County (e.g., Ada, Latah) and Year.\",\n      \"Metadata display including Importance level, Document Type, and Year.\",\n      \"Direct deep-linking to remote PDF storage (api.mountmaster.pro).\",\n      \"Real-time database connection status indicator.\"\n    ],\n    \"secondary\": [\n      \"Cross-referencing between related legal cases (7,460+ connections).\",\n      \"Dark-mode 'Hacker' aesthetic UI using JetBrains Mono fonts.\",\n      \"Mobile-responsive layout for field research.\",\n      \"AI-generated summaries for every document to reduce reading time.\"\n    ],\n    \"future\": [\n      \"Strategic ad placement for monetization.\",\n      \"Progressive Web App (PWA) capabilities for full offline installation.\",\n      \"Advanced semantic search modes (6 specialized modes mentioned).\",\n      \"Performance analytics for search queries.\"\n    ]\n  },\n  \"technical_spec\": {\n    \"recommended_stack\": {\n      \"frontend\": \"Vanilla JavaScript (ES6+), HTML5, CSS3 (Custom Properties/Variables).\",\n      \"backend\": \"Python 3 (http.server for local serving).\",\n      \"data_storage\": \"Flat JSON/JS objects (enhanced_document_database.js) for zero-latency local searching.\"\n    },\n    \"database\": \"File-based JSON structure nested by [County][Year][Document_Array].\",\n    \"apis\": [\n      \"Remote PDF hosting: http://api.mountmaster.pro/ada/...\"\n    ],\n    \"authentication\": \"None (Localhost/Internal tool focus).\",\n    \"performance\": \"Instantaneous search (under 100ms) by keeping the 1,135-document index in client-side memory.\",\n    \"security\": \"Localhost execution; no sensitive data transmitted to third parties.\"\n  },\n  \"constraints\": [\n    \"Must run on MX Linux environment.\",\n    \"Must handle specific file pathing: /home/flintx/kobanger/webapp/.\",\n    \"Must function without a traditional SQL/NoSQL database (relying on JS files).\",\n    \"Documents are hosted remotely; requires internet access to view PDFs but not to search index.\"\n  ],\n  \"ui_ux\": {\n    \"layout\": \"Centralized search bar with a results feed below. Metadata tags for quick scanning.\",\n    \"aesthetic\": \"High-contrast dark mode. Primary: #0a0a0f, Accent: #00d4ff (Cyberpunk/Legal Tech style).\",\n    \"key_screens\": [\n      \"Main Search Dashboard\",\n      \"Document Result Feed\",\n      \"Database Status/Diagnostics View\"\n    ]\n  },\n  \"assumptions_made\": [\n    \"The document database (enhanced_document_database.js) is correctly formatted as a nested object: county -> year -> array of docs. [ASSUMED - CONFIRM]\",\n    \"Python 3 is the standard environment on the target machine. [ASSUMED - CONFIRM]\",\n    \"The search index is pre-computed and does not need to be built at runtime. [ASSUMED - CONFIRM]\"\n  ],\n  \"missing_info\": [\n    \"The specific logic for the '6 specialized search modes' mentioned in the server logs.\",\n    \"The specific structure of the 'cross-reference' mapping in search_index.json.\",\n    \"Details on the 'Strategic ad placement' implementation (placeholders or actual ad network integration).\"\n  ],\n  \"completeness_score\": 85,\n  \"peacock_ready\": true,\n  \"build_difficulty\": \"moderate\"\n}\n```",
    "falcon": "SPARK REPORT – “LIVING SCHEMATIC” STYLE GUIDE  \n(Everything below is copy-paste ready for React + Tailwind + Framer Motion)\n\n--------------------------------------------------\n1. TOKENS (Tailwind config extension)\n--------------------------------------------------\nmodule.exports = {\n  theme: {\n    extend: {\n      colors: {\n        'void': '#050505',\n        'matrix': '#00FF41',\n        'alert': '#FF2939',\n        'processing': '#FFD400',\n      },\n      fontFamily: {\n        mono: ['JetBrains Mono', 'monospace'],\n      },\n      boxShadow: {\n        'matrix': '0 0 4px #00FF41, 0 0 8px #00FF41',\n        'alert': '0 0 4px #FF2939, 0 0 8px #FF2939',\n        'processing': '0 0 4px #FFD400, 0 0 8px #FFD400',\n      },\n      animation: {\n        'scan': 'scan 8s linear infinite',\n        'pulse-green': 'pulse-green 1.2s ease-in-out infinite',\n        'pulse-red': 'pulse-red .6s ease-in-out infinite',\n        'flow': 'flow 1s linear infinite',\n      },\n      keyframes: {\n        scan: {\n          '0%': { transform: 'translateY(-100%)' },\n          '100%': { transform: 'translateY(100%)' },\n        },\n        'pulse-green': {\n          '0%,100%': { boxShadow: '0 0 4px #00FF41' },\n          '50%': { boxShadow: '0 0 12px #00FF41' },\n        },\n        'pulse-red': {\n          '0%,100%': { opacity: 1 },\n          '50%': { opacity: .2 },\n        },\n        flow: {\n          '0%': { backgroundPosition: '0% 0%' },\n          '100%': { backgroundPosition: '200% 0%' },\n        },\n      },\n    },\n  },\n  plugins: [],\n}\n\n--------------------------------------------------\n2. GLOBAL LAYER (CRT feel)\n--------------------------------------------------\n<div className=\"relative min-h-screen bg-void text-matrix font-mono text-xs overflow-hidden\">\n  {/* CRT scanlines */}\n  <div className=\"pointer-events-none absolute inset-0 z-0 opacity-20\">\n    <div className=\"h-px bg-matrix animate-scan\" />\n  </div>\n  {/* slight screen curve */}\n  <div className=\"pointer-events-none absolute inset-0 z-10 ring-4 ring-void rounded-lg\" />\n  {children}\n</div>\n\n--------------------------------------------------\n3. THE NERVOUS-SYSTEM WIRE (SVG + motion)\n--------------------------------------------------\nconst Wire = ({ state, id }) => {\n  const isSuccess = state === 'success'\n  const isFailure = state === 'failure'\n  const isProcessing = state === 'processing'\n\n  return (\n    <svg className=\"w-full h-1\">\n      <defs>\n        <linearGradient id={`flow-${id}`} x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n          <motion.stop\n            offset=\"0%\"\n            stopColor=\"#FFD400\"\n            stopOpacity=\"0\"\n            animate={{ stopOpacity: [0, 1, 0] }}\n            transition={{ repeat: Infinity, duration: 1 }}\n          />\n          <motion.stop offset=\"100%\" stopColor=\"#FFD400\" stopOpacity=\"0\" />\n        </linearGradient>\n      </defs>\n\n      <motion.path\n        d=\"M 0 4 H 100%\" // straight line for demo\n        stroke={\n          isFailure ? 'alert' : isSuccess ? 'matrix' : `url(#flow-${id})`\n        }\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        initial={{ pathLength: 0 }}\n        animate={{\n          pathLength: isProcessing ? [0, 1] : 1,\n          opacity: isFailure ? [1, 0, 1] : 1,\n        }}\n        transition={{\n          pathLength: { duration: .8, ease: 'linear' },\n          opacity: { repeat: isFailure ? Infinity : 0, duration: .4 },\n        }}\n        className={clsx(\n          'drop-shadow-matrix',\n          isSuccess && 'animate-pulse-green',\n          isFailure && 'animate-pulse-red',\n        )}\n      />\n    </svg>\n  )\n}\n\n--------------------------------------------------\n4. MICRO-COMPONENTS\n--------------------------------------------------\nBlinkingCursor: <span className=\"inline-block w-2 h-3 bg-matrix animate-pulse\" />\nGlowText: <span className=\"drop-shadow-matrix\">text</span>\nAlertBadge: <span className=\"px-1 bg-alert text-void font-bold animate-pulse\">ALERT</span>\n\n--------------------------------------------------\n5. USAGE SNAPSHOT\n--------------------------------------------------\n<Wire state={status} id=\"login-wire\" />\n\n--------------------------------------------------\n6. NOTES\n--------------------------------------------------\n- All motion is GPU-accelerated (transform / opacity only).  \n- SVG pathLength keeps the “electric flow” perfectly synced to wire length.  \n- Failure flash uses opacity instead of display:none to avoid layout shift.",
    "eagle": "FALCON  (Solutions Architect & Data Engineer)  \nMISSION  : “Interactive Blueprint” – data-flow map & state-machine spec  \n\n--------------------------------------------------------------------\n1.  GLOBAL STATUS STORE  (Zustand)\n--------------------------------------------------------------------\n```ts\n// stores/blueprint.store.ts\nimport { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nexport type NodeStatus = 'Idle' | 'Loading' | 'Success' | 'Error';\n\nexport interface NodeSnapshot {\n  id: string;                 // unique inside blueprint\n  status: NodeStatus;\n  progress?: number;          // 0-100 (optional)\n  error?: string;             // populated when status === 'Error'\n  updatedAt: number;          // Date.now() – for optimistic UI\n}\n\ninterface BlueprintState {\n  nodes: Record<string, NodeSnapshot>;   // O(1) lookup\n  setNode(id: string, patch: Partial<NodeSnapshot>): void;\n  setBulk(updates: Record<string, Partial<NodeSnapshot>>): void;\n  reset(): void;\n}\n\nexport const useBlueprintStore = create<BlueprintState>()(\n  subscribeWithSelector((set) => ({\n    nodes: {},\n    setNode: (id, patch) =>\n      set((s) => ({\n        nodes: { ...s.nodes, [id]: { ...s.nodes[id], ...patch, updatedAt: Date.now() } },\n      })),\n    setBulk: (updates) =>\n      set((s) => ({\n        nodes: Object.fromEntries(\n          Object.entries(updates).map(([k, v]) => [\n            k,\n            { ...s.nodes[k], ...v, updatedAt: Date.now() },\n          ])\n        ),\n      })),\n    reset: () => set({ nodes: {} }),\n  }))\n);\n```\n\n--------------------------------------------------------------------\n2.  BLUEPRINT LAYER  (documentation & contract)\n--------------------------------------------------------------------\n```ts\n// types/blueprint.ts\nexport type PortType = 'Files' | 'IndexedDB' | 'REST' | 'WebSocket' | 'Kafka' | 'Custom';\n\nexport interface Port {\n  name: string;\n  type: PortType;\n  required: boolean;\n  description?: string;\n}\n\nexport interface NodeDef {\n  id: string;\n  title: string;\n  inputs: Port[];\n  outputs: Port[];\n  states: string[];          // human-readable steps (e.g. [\"Parsing\",\"Striking\"])\n  worker: 'main' | 'web-worker'; // where the heavy lifting runs\n}\n\nexport interface Blueprint {\n  name: string;\n  version: string;\n  nodes: NodeDef[];\n  edges: Array<{ from: string; to: string; fromOutput: string; toInput: string }>;\n}\n```\n\nExample instance:\n```ts\nconst blueprint: Blueprint = {\n  name: 'Interactive Blueprint',\n  version: '1.0.0',\n  nodes: [\n    {\n      id: 'BATCH_PROCESSOR',\n      title: 'Batch Processor',\n      inputs: [{ name: 'files', type: 'Files', required: true }],\n      outputs: [{ name: 'indexed', type: 'IndexedDB', required: true }],\n      states: ['Parsing', 'Striking'],\n      worker: 'web-worker',\n    },\n  ],\n  edges: [],\n};\n```\n\n--------------------------------------------------------------------\n3.  STATE-MACHINE LOGIC  (drives UI visualization)\n--------------------------------------------------------------------\n```ts\n// machines/nodeMachine.ts\n// XState-like tiny FSM – no external deps\nexport type NodeEvent =\n  | { type: 'START' }\n  | { type: 'WORKER_DONE'; payload: any }\n  | { type: 'WORKER_ERROR'; message: string }\n  | { type: 'RETRY' }\n  | { type: 'RESET' };\n\nexport const nextStatus = (\n  current: NodeStatus,\n  event: NodeEvent\n): NodeStatus => {\n  const table: Record<NodeStatus, Partial<Record<NodeEvent['type'], NodeStatus>>> =\n    {\n      Idle: { START: 'Loading' },\n      Loading: {\n        WORKER_DONE: 'Success',\n        WORKER_ERROR: 'Error',\n      },\n      Success: { RESET: 'Idle' },\n      Error: { RETRY: 'Loading', RESET: 'Idle' },\n    };\n  return table[current][event.type] ?? current;\n};\n```\n\n--------------------------------------------------------------------\n4.  DEXIE (IndexedDB)  – non-blocking persistence\n--------------------------------------------------------------------\n```ts\n// db/dexie.ts\nimport Dexie, { Table } from 'dexie';\n\nexport interface NodeLog {\n  nodeId: string;\n  blueprintVersion: string;\n  status: NodeStatus;\n  timestamp: number;\n  error?: string;\n}\n\nexport class BlueprintDexie extends Dexie {\n  nodeLogs!: Table<NodeLog>;\n\n  constructor() {\n    super('BlueprintDB');\n    this.version(1).stores({\n      nodeLogs: '++id,nodeId,timestamp', // allow range queries\n    });\n  }\n}\n\nexport const db = new BlueprintDexie();\n\n// Persist every state change off the main thread\nuseBlueprintStore.subscribe(\n  (s) => s.nodes,\n  (nodes) => {\n    const logs: NodeLog[] = Object.values(nodes).map((n) => ({\n      nodeId: n.id,\n      blueprintVersion: blueprint.version,\n      status: n.status,\n      timestamp: n.updatedAt,\n      error: n.error,\n    }));\n    // fire-and-forget – Dexie transactions are async & indexed\n    db.nodeLogs.bulkAdd(logs).catch(() => {\n      /* silent fail – UI never blocks */\n    });\n  },\n  { fireImmediately: false }\n);\n```\n\n--------------------------------------------------------------------\n5.  USAGE PATTERN  (React component)\n--------------------------------------------------------------------\n```tsx\nconst NodeVisual: React.FC<{ def: NodeDef }> = ({ def }) => {\n  const snap = useBlueprintStore((s) => s.nodes[def.id]);\n  const { setNode } = useBlueprintStore.getState();\n\n  React.useEffect(() => {\n    if (!snap) setNode(def.id, { id: def.id, status: 'Idle' });\n  }, []);\n\n  const status = snap?.status ?? 'Idle';\n\n  const run = () => {\n    setNode(def.id, { status: 'Loading' });\n    const worker = new Worker(new URL('../workers/batch.ts', import.meta.url), {\n      type: 'module',\n    });\n    worker.postMessage({ nodeId: def.id, inputs: {} });\n    worker.onmessage = (e) => {\n      const ev: NodeEvent = e.data;\n      const next = nextStatus(status, ev);\n      setNode(def.id, { status: next, error: ev.type === 'WORKER_ERROR' ? ev.message : undefined });\n    };\n  };\n\n  return (\n    <div data-status={status} onClick={run}>\n      {def.title} – {status}\n    </div>\n  );\n};\n```\n\nThe above satisfies:\n- Global state tracking every node’s life-cycle.  \n- Blueprint layer that documents inputs/outputs/states.  \n- Dexie writes performed asynchronously, never freezing the UI thread.",
    "owl": "",
    "hawk": ""
  },
  "outputs": {
    "spark": "SPARK REPORT – “LIVING SCHEMATIC” STYLE GUIDE  \n(Everything below is copy-paste ready for React + Tailwind + Framer Motion)\n\n--------------------------------------------------\n1. TOKENS (Tailwind config extension)\n--------------------------------------------------\nmodule.exports = {\n  theme: {\n    extend: {\n      colors: {\n        'void': '#050505',\n        'matrix': '#00FF41',\n        'alert': '#FF2939',\n        'processing': '#FFD400',\n      },\n      fontFamily: {\n        mono: ['JetBrains Mono', 'monospace'],\n      },\n      boxShadow: {\n        'matrix': '0 0 4px #00FF41, 0 0 8px #00FF41',\n        'alert': '0 0 4px #FF2939, 0 0 8px #FF2939',\n        'processing': '0 0 4px #FFD400, 0 0 8px #FFD400',\n      },\n      animation: {\n        'scan': 'scan 8s linear infinite',\n        'pulse-green': 'pulse-green 1.2s ease-in-out infinite',\n        'pulse-red': 'pulse-red .6s ease-in-out infinite',\n        'flow': 'flow 1s linear infinite',\n      },\n      keyframes: {\n        scan: {\n          '0%': { transform: 'translateY(-100%)' },\n          '100%': { transform: 'translateY(100%)' },\n        },\n        'pulse-green': {\n          '0%,100%': { boxShadow: '0 0 4px #00FF41' },\n          '50%': { boxShadow: '0 0 12px #00FF41' },\n        },\n        'pulse-red': {\n          '0%,100%': { opacity: 1 },\n          '50%': { opacity: .2 },\n        },\n        flow: {\n          '0%': { backgroundPosition: '0% 0%' },\n          '100%': { backgroundPosition: '200% 0%' },\n        },\n      },\n    },\n  },\n  plugins: [],\n}\n\n--------------------------------------------------\n2. GLOBAL LAYER (CRT feel)\n--------------------------------------------------\n<div className=\"relative min-h-screen bg-void text-matrix font-mono text-xs overflow-hidden\">\n  {/* CRT scanlines */}\n  <div className=\"pointer-events-none absolute inset-0 z-0 opacity-20\">\n    <div className=\"h-px bg-matrix animate-scan\" />\n  </div>\n  {/* slight screen curve */}\n  <div className=\"pointer-events-none absolute inset-0 z-10 ring-4 ring-void rounded-lg\" />\n  {children}\n</div>\n\n--------------------------------------------------\n3. THE NERVOUS-SYSTEM WIRE (SVG + motion)\n--------------------------------------------------\nconst Wire = ({ state, id }) => {\n  const isSuccess = state === 'success'\n  const isFailure = state === 'failure'\n  const isProcessing = state === 'processing'\n\n  return (\n    <svg className=\"w-full h-1\">\n      <defs>\n        <linearGradient id={`flow-${id}`} x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n          <motion.stop\n            offset=\"0%\"\n            stopColor=\"#FFD400\"\n            stopOpacity=\"0\"\n            animate={{ stopOpacity: [0, 1, 0] }}\n            transition={{ repeat: Infinity, duration: 1 }}\n          />\n          <motion.stop offset=\"100%\" stopColor=\"#FFD400\" stopOpacity=\"0\" />\n        </linearGradient>\n      </defs>\n\n      <motion.path\n        d=\"M 0 4 H 100%\" // straight line for demo\n        stroke={\n          isFailure ? 'alert' : isSuccess ? 'matrix' : `url(#flow-${id})`\n        }\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        initial={{ pathLength: 0 }}\n        animate={{\n          pathLength: isProcessing ? [0, 1] : 1,\n          opacity: isFailure ? [1, 0, 1] : 1,\n        }}\n        transition={{\n          pathLength: { duration: .8, ease: 'linear' },\n          opacity: { repeat: isFailure ? Infinity : 0, duration: .4 },\n        }}\n        className={clsx(\n          'drop-shadow-matrix',\n          isSuccess && 'animate-pulse-green',\n          isFailure && 'animate-pulse-red',\n        )}\n      />\n    </svg>\n  )\n}\n\n--------------------------------------------------\n4. MICRO-COMPONENTS\n--------------------------------------------------\nBlinkingCursor: <span className=\"inline-block w-2 h-3 bg-matrix animate-pulse\" />\nGlowText: <span className=\"drop-shadow-matrix\">text</span>\nAlertBadge: <span className=\"px-1 bg-alert text-void font-bold animate-pulse\">ALERT</span>\n\n--------------------------------------------------\n5. USAGE SNAPSHOT\n--------------------------------------------------\n<Wire state={status} id=\"login-wire\" />\n\n--------------------------------------------------\n6. NOTES\n--------------------------------------------------\n- All motion is GPU-accelerated (transform / opacity only).  \n- SVG pathLength keeps the “electric flow” perfectly synced to wire length.  \n- Failure flash uses opacity instead of display:none to avoid layout shift.",
    "falcon": "FALCON  (Solutions Architect & Data Engineer)  \nMISSION  : “Interactive Blueprint” – data-flow map & state-machine spec  \n\n--------------------------------------------------------------------\n1.  GLOBAL STATUS STORE  (Zustand)\n--------------------------------------------------------------------\n```ts\n// stores/blueprint.store.ts\nimport { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nexport type NodeStatus = 'Idle' | 'Loading' | 'Success' | 'Error';\n\nexport interface NodeSnapshot {\n  id: string;                 // unique inside blueprint\n  status: NodeStatus;\n  progress?: number;          // 0-100 (optional)\n  error?: string;             // populated when status === 'Error'\n  updatedAt: number;          // Date.now() – for optimistic UI\n}\n\ninterface BlueprintState {\n  nodes: Record<string, NodeSnapshot>;   // O(1) lookup\n  setNode(id: string, patch: Partial<NodeSnapshot>): void;\n  setBulk(updates: Record<string, Partial<NodeSnapshot>>): void;\n  reset(): void;\n}\n\nexport const useBlueprintStore = create<BlueprintState>()(\n  subscribeWithSelector((set) => ({\n    nodes: {},\n    setNode: (id, patch) =>\n      set((s) => ({\n        nodes: { ...s.nodes, [id]: { ...s.nodes[id], ...patch, updatedAt: Date.now() } },\n      })),\n    setBulk: (updates) =>\n      set((s) => ({\n        nodes: Object.fromEntries(\n          Object.entries(updates).map(([k, v]) => [\n            k,\n            { ...s.nodes[k], ...v, updatedAt: Date.now() },\n          ])\n        ),\n      })),\n    reset: () => set({ nodes: {} }),\n  }))\n);\n```\n\n--------------------------------------------------------------------\n2.  BLUEPRINT LAYER  (documentation & contract)\n--------------------------------------------------------------------\n```ts\n// types/blueprint.ts\nexport type PortType = 'Files' | 'IndexedDB' | 'REST' | 'WebSocket' | 'Kafka' | 'Custom';\n\nexport interface Port {\n  name: string;\n  type: PortType;\n  required: boolean;\n  description?: string;\n}\n\nexport interface NodeDef {\n  id: string;\n  title: string;\n  inputs: Port[];\n  outputs: Port[];\n  states: string[];          // human-readable steps (e.g. [\"Parsing\",\"Striking\"])\n  worker: 'main' | 'web-worker'; // where the heavy lifting runs\n}\n\nexport interface Blueprint {\n  name: string;\n  version: string;\n  nodes: NodeDef[];\n  edges: Array<{ from: string; to: string; fromOutput: string; toInput: string }>;\n}\n```\n\nExample instance:\n```ts\nconst blueprint: Blueprint = {\n  name: 'Interactive Blueprint',\n  version: '1.0.0',\n  nodes: [\n    {\n      id: 'BATCH_PROCESSOR',\n      title: 'Batch Processor',\n      inputs: [{ name: 'files', type: 'Files', required: true }],\n      outputs: [{ name: 'indexed', type: 'IndexedDB', required: true }],\n      states: ['Parsing', 'Striking'],\n      worker: 'web-worker',\n    },\n  ],\n  edges: [],\n};\n```\n\n--------------------------------------------------------------------\n3.  STATE-MACHINE LOGIC  (drives UI visualization)\n--------------------------------------------------------------------\n```ts\n// machines/nodeMachine.ts\n// XState-like tiny FSM – no external deps\nexport type NodeEvent =\n  | { type: 'START' }\n  | { type: 'WORKER_DONE'; payload: any }\n  | { type: 'WORKER_ERROR'; message: string }\n  | { type: 'RETRY' }\n  | { type: 'RESET' };\n\nexport const nextStatus = (\n  current: NodeStatus,\n  event: NodeEvent\n): NodeStatus => {\n  const table: Record<NodeStatus, Partial<Record<NodeEvent['type'], NodeStatus>>> =\n    {\n      Idle: { START: 'Loading' },\n      Loading: {\n        WORKER_DONE: 'Success',\n        WORKER_ERROR: 'Error',\n      },\n      Success: { RESET: 'Idle' },\n      Error: { RETRY: 'Loading', RESET: 'Idle' },\n    };\n  return table[current][event.type] ?? current;\n};\n```\n\n--------------------------------------------------------------------\n4.  DEXIE (IndexedDB)  – non-blocking persistence\n--------------------------------------------------------------------\n```ts\n// db/dexie.ts\nimport Dexie, { Table } from 'dexie';\n\nexport interface NodeLog {\n  nodeId: string;\n  blueprintVersion: string;\n  status: NodeStatus;\n  timestamp: number;\n  error?: string;\n}\n\nexport class BlueprintDexie extends Dexie {\n  nodeLogs!: Table<NodeLog>;\n\n  constructor() {\n    super('BlueprintDB');\n    this.version(1).stores({\n      nodeLogs: '++id,nodeId,timestamp', // allow range queries\n    });\n  }\n}\n\nexport const db = new BlueprintDexie();\n\n// Persist every state change off the main thread\nuseBlueprintStore.subscribe(\n  (s) => s.nodes,\n  (nodes) => {\n    const logs: NodeLog[] = Object.values(nodes).map((n) => ({\n      nodeId: n.id,\n      blueprintVersion: blueprint.version,\n      status: n.status,\n      timestamp: n.updatedAt,\n      error: n.error,\n    }));\n    // fire-and-forget – Dexie transactions are async & indexed\n    db.nodeLogs.bulkAdd(logs).catch(() => {\n      /* silent fail – UI never blocks */\n    });\n  },\n  { fireImmediately: false }\n);\n```\n\n--------------------------------------------------------------------\n5.  USAGE PATTERN  (React component)\n--------------------------------------------------------------------\n```tsx\nconst NodeVisual: React.FC<{ def: NodeDef }> = ({ def }) => {\n  const snap = useBlueprintStore((s) => s.nodes[def.id]);\n  const { setNode } = useBlueprintStore.getState();\n\n  React.useEffect(() => {\n    if (!snap) setNode(def.id, { id: def.id, status: 'Idle' });\n  }, []);\n\n  const status = snap?.status ?? 'Idle';\n\n  const run = () => {\n    setNode(def.id, { status: 'Loading' });\n    const worker = new Worker(new URL('../workers/batch.ts', import.meta.url), {\n      type: 'module',\n    });\n    worker.postMessage({ nodeId: def.id, inputs: {} });\n    worker.onmessage = (e) => {\n      const ev: NodeEvent = e.data;\n      const next = nextStatus(status, ev);\n      setNode(def.id, { status: next, error: ev.type === 'WORKER_ERROR' ? ev.message : undefined });\n    };\n  };\n\n  return (\n    <div data-status={status} onClick={run}>\n      {def.title} – {status}\n    </div>\n  );\n};\n```\n\nThe above satisfies:\n- Global state tracking every node’s life-cycle.  \n- Blueprint layer that documents inputs/outputs/states.  \n- Dexie writes performed asynchronously, never freezing the UI thread.",
    "eagle": "",
    "owl": "",
    "hawk": ""
  },
  "telemetry": {
    "spark": {
      "status": "success"
    },
    "falcon": {
      "status": "success"
    },
    "eagle": {
      "status": "idle"
    },
    "owl": {
      "status": "idle"
    },
    "hawk": {
      "status": "idle"
    }
  },
  "activePrompts": {
    "spark": "02_spark_design",
    "falcon": "03_falcon_architecture",
    "eagle": "04_eagle_implementation",
    "owl": "owl_v21",
    "hawk": "05_hawk_qa"
  },
  "owlQueue": [],
  "name": "ZERO_FRICTION_OP"
}